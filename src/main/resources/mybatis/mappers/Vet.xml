<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.springframework.samples.petclinic.vet.VetRepository">

    <select id="findAll" parameterType="map" resultType="org.springframework.samples.petclinic.vet.Vet">
        SELECT
            id,
            first_name as firstName,
            last_name as lastName,
            (SELECT COUNT(*) FROM vets) as totalCount
        FROM vets
        ORDER BY id
        OFFSET #{offset} ROWS FETCH FIRST #{limit} ROWS ONLY
    </select>

</mapper>
